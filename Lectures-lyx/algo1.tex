%% LyX 2.3.2 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[english,hebrew]{article}
\usepackage[T1]{fontenc}
\usepackage[latin9,cp1255]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\PassOptionsToPackage{normalem}{ulem}
\usepackage{ulem}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
%% Because html converters don't know tabularnewline
\providecommand{\tabularnewline}{\\}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Textclass specific LaTeX commands.
\newenvironment{lyxlist}[1]
	{\begin{list}{}
		{\settowidth{\labelwidth}{#1}
		 \setlength{\leftmargin}{\labelwidth}
		 \addtolength{\leftmargin}{\labelsep}
		 \renewcommand{\makelabel}[1]{##1\hfil}}}
	{\end{list}}

\AtBeginDocument{
  \def\labelitemi{\(\star\)}
  \def\labelitemii{\(\bullet\)}
  \def\labelitemiii{\normalfont\bfseries{--}}
}

\makeatother

\usepackage{babel}
\begin{document}
\title{הרצאה {\beginL 1\endL}}
\maketitle

\subsection*{אלגוריתמים לחיפוש בגרפים}

\subsubsection*{דוגמה:}

\begin{tabular}{|c|c|c|c|}
\hline 
\R{\L{$\text{s\ensuremath{\underset{\downarrow}{\rightarrow}}}$}} & \R{\L{$\ensuremath{\underset{\downarrow}{\rightarrow}}$}} &  & \tabularnewline
\hline 
 &  & \R{\L{$\blacksquare$}} & \tabularnewline
\hline 
\R{\L{$\blacksquare$}} &  &  & \tabularnewline
\hline 
 &  &  & \R{\L{$\text{T}$}}\tabularnewline
\hline 
\end{tabular} ההתקדמות בכל צעד: ימינה, שמאלה למטה

\subsubsection*{המטרה:}

\paragraph{למצוא את המסלול הקצר ביותר מ-\L{$\text{S}$} ל-\L{$\text{T}$}.}

\subsubsection*{חיפוש בגרף:}

נתון גרף \L{$G=(V,E)$} וצומת מקור \L{$s\in V$} .
\begin{enumerate}
\item יש לגלות את כל הצמתים ב-\L{$\text{G}$} שהם ברי-הגעה מ-\L{$s$}.
\item עבור צומת \L{$v$} שהוא בר-הגעה מ-\L{$s$} יש למצוא את המרחק הקצר
ביותר בקשתות מ-\L{$s$} ל-\L{$v$}.
\end{enumerate}

\subsubsection*{האלגוריתם \L{$\text{(Breath First Search) BFS}$}}

עובר על כל הקשתות של \L{$\text{G}$} ו\textquotedblleft מגלה\textquotedblleft{}
את קבוצת הצמתים שניתנים להגעה מ-\L{$s$}, \L{$R\subseteq V$}.

\subsubsection*{פלט האלגוריתם:}
\begin{itemize}
\item עץ ששורשו \L{$s$} המכיל את כל הצמתים ב-\L{$R$}.
\item המרחק, דהיינו מספר הקשתות המינימלי מ-\L{$s$} לכל צומת ב-\inputencoding{latin9}\L{$R$}\inputencoding{cp1255}.
\item ניתן להפעיל את \L{$\text{BFS}$} גם על גרפים מכוונים והן על גרפים
לא-מכוונים.
\end{itemize}

\subsubsection*{פסאודו קוד ל-\L{$\text{BFS}$}:}

\L{
\begin{align*}
 & \text{Input: A graph \ensuremath{G=(V,E)}, s\ensuremath{\in V}}\\
 & \text{Output: For any \ensuremath{v\in V}, \ensuremath{d(v)} is the distance from \ensuremath{s} to \ensuremath{v}.}\\
 & \text{For any \ensuremath{v\in V,} do:}\\
 & \text{ }\text{ }d(v)\leftarrow\infty\\
 & \text{ }\text{ }d(s)\leftarrow0\\
 & \text{ }\text{ }i\leftarrow0\\
 & \text{ \ensuremath{\text{While there is neighbor \ensuremath{v} of \ensuremath{u} with \ensuremath{d(v)}= \ensuremath{\infty} do:}}}\\
 & \text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{d(v)\ensuremath{\leftarrow i+1}}\\
 & i\leftarrow i+1
\end{align*}
}

\subsubsection*{מימוש \L{$\text{BFS}$} באמצעות תור:}

בתחילה התור \L{$Q$} ריק.

צומת \L{$v$} ש\textquotedblleft התגלה\textquotedblleft{} נכנס ל-\L{$Q$}.

צומת \L{$w$} יוצא מראש התור לקראת סריקת שכניו.

\uline{האב} של צומת \L{$v$} בעץ החיפוש הוא הצומת שגרם ל-\L{$v$}
להתגלות.

האלגוריתם רץ כל עוד \L{$Q$} לא ריק.

\subsubsection*{סימונים:}
\begin{itemize}
\item \L{$d(v)$} - המרחק של \L{$v$} מ-\L{$s$}.
\item \L{$\pi(v)$} - האב של \L{$v$} בעץ החיפוש.
\item \L{$Adj(v)$} -קבוצת השכנים של \L{$v$} ב-\L{$G$}.\\
\end{itemize}
\L{
\begin{align*}
 & \text{For any \ensuremath{u\in V\backslash\{s\}} do: \ensuremath{\{d(u)\leftarrow\infty,\pi(u)\leftarrow NULL\}}}\\
 & d(s)\leftarrow0\\
 & Q\leftarrow\emptyset\\
 & \text{Enqueue\ensuremath{(Q,s)}}\\
 & \text{While \ensuremath{Q\ne\emptyset} do}:\\
 & \text{ }\text{ }u\leftarrow\text{dequeue\ensuremath{(Q)}}\\
 & \text{ }\text{ }\text{Foreach \ensuremath{v\in Adj(u)} do:}\\
 & \text{ }\text{ }\text{ }\text{ }\text{if \ensuremath{d(v)=\infty} then:}\\
 & \text{ }\text{ }\text{ }\text{ }\text{ }\text{ }d(v)\leftarrow d(u)+1\\
 & \text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\pi(v)\leftarrow u\\
 & \text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{Enqueue\ensuremath{(Q,v)}}
\end{align*}
}

\subsubsection*{זמן הריצה של \L{$\text{BFS}$}:}
\begin{lyxlist}{00.00.0000}
\item [{\textbf{אתחול:}}] \L{$O(|V|)$}
\end{lyxlist}
\textbf{לולאת ה-\L{$\text{\textbf{while}}$}:}

עבור כל צומת \L{$v$} שיוצא מהתור עוברים על כל השכנים, דהיינו לכל
היותר \L{$O(|Adj(v)|)$}

סה\textquotedblleft כ נעבור על כל קשת בגרף לכל היותר פעמיים לכן זמן
הריצה הוא \L{$O(|E|)$}.

\subsubsection*{הוכחת נכונות \L{$\text{BFS}$}:}
\begin{itemize}
\item נראה כי \L{$\text{BFS}$} מוצא את המסלול הקצר מ-\L{$s$} לכל צומת
\L{$v$} אשר בר הגעה מ-\L{$s$}.
\item נסמן ב-\L{$\delta(s,v)$} את המרחק הקצר ביותר )בקשתות( מ-\L{$s$}
ל-\L{$v$}. אם אין מסלול מ-\L{$s$}\\
ל-\L{$v$} אזי \L{$\delta(s,v)=\infty$}.
\end{itemize}

\subsubsection*{למה {\beginL 1\endL}:}

\subsubsection*{לכל קשת \L{$(u,v)\in E$} מתקיים \L{$\delta(s,v)\le\delta(s,u)+1$}}

\subsubsection*{הוכחת למה {\beginL 1\endL}:}
\begin{enumerate}
\item אם \L{$u$} בר הגעה מ-\L{$s$}, אזי המסלול הקצר מ-\L{$s$} ל-\L{$v$}
הוא לכל היותר\\
 המסלול הקצר מ-\L{$s$} ל-\L{$u$} \L{$+$} הקשת \L{$(u,v)$}.
\item אחרת \L{$\delta(s,u)=\infty$} ולכן אי-השוויון מתקיים.
\end{enumerate}

\subsubsection*{למה {\beginL 2\endL}:}

בסיום האלגוריתם הערך \L{$d(v)$} המחושב ע\textquotedblleft י \L{$\text{BFS}$}
מקיים \L{$d(v)\ge\delta(s,v)$} לכל \L{$v\in V$}.

\subsubsection*{הוכחה:}

נוכיח באינדוקציה על מספר צעד ה-\L{$\text{Enqueue}$}, שאחרי צעד כזה
יתקיים\\
 \L{$d(v)\ge\delta(s,v)$} לכל \L{$v\in V$}.

\paragraph{בסיס:}

אחרי פעולת \L{$\text{Enqueue}(Q,s)$} הטענה מתקיימת כי \L{$d(s)=0=\delta(s,s)$}\\
ולכל \L{$v\in V\backslash\{s\}$} מתקיים \L{$d(v)=\infty$}.

\paragraph{צעד האינדוקציה:}

נניח שצומת \L{$v$} \textquotedblright התגלה\textquotedblleft{} תכאשר
סרקנו את השכנים של \L{$u$}.

מכאן, \L{$v$} נכנס לתור. מהנחת האינדוקציה, \L{$d(u)\ge\delta(s,u)$}.
לכן:

\L{
\[
d(v)\underbrace{=}_{\text{Algorithm'}}d(u)+1\underbrace{\ge}_{\text{Induction}}\delta(s,u)+1\underbrace{\ge}_{\text{Lema 1}}\delta(s,v)
\]
}

היות ש-\L{$d(v)$} לא ישתנה במהלך האלגוריתם, אי-השוויון שמצאנו לעיל
מתקיים גם בסוף האלגוריתם.

\subsubsection*{למה {\beginL 3\endL}:}

נניח שבמהלך הביצוע של \L{$\text{BFS}$} התור \L{$Q$} מכיל את \L{$\{v_{1},v_{2},\dots,v_{r}\}$}\\
אזי:

\L{
\[
d(v_{r})\le d(v_{1})+1
\]
}

\L{
\[
\forall1\le i\le r,d(v_{i})\le d(v_{i+1})
\]
}

\subsubsection*{מסקנה{\large{} }{\beginL 4\endL}:}

נניח ש-\L{$v_{i}$} נכנס ל-\L{$Q$} לפני ש-\L{$v_{j}$} נכנס לתור.
אזי, \L{$d(v_{i})\le d(v_{j})$}.

\subsubsection*{הוכחה:}

נתבונן ב-\L{$v_{i}$} ו-\L{$v_{j}$} וסדרת הצמתים שהוכנסו ביניהם ל-\L{$Q$}:
\L{$\{v_{i},v_{i+1},v_{i+2},v_{j}\}$}\\
כל זוג צמתים עוקבים בסדרה \L{$v_{k},v_{k+1}$} מקיימים את אחד מהתנאים
הבאים:
\begin{enumerate}
\item \L{$v_{k},v_{k+1}$} יחד בתור ולכן לפי למה {\beginL 3\endL} \L{$d(v_{k})\le d(v_{k+1})$}.
\item \L{$v_{k+1}$} נכנס לתור \L{$Q$} אחרי ש-\L{$v_{k}$} יוצא ממנו אזי
מפני שאין צומת ביניהם בסדרה נובע \\
כי \L{$v_{k}$}גורם ל-\L{$v_{k+1}$} להתגלות ולכן \L{$d(v_{k+1})=d(v_{k})+1$}.
\end{enumerate}
\L{$\Leftarrow$}\texttt{\L{
\[
d(v_{i})\le d(v_{2})\le\dots\le d(v_{l})\le d(v_{j})
\]
}}

\L{$\blacksquare$}.

\subsubsection*{משפט:}

נניח שמריצים את \L{$\text{BFS}$} על \L{$G$} )מכוון/לא מכוון( עם
צומת מקור \L{$s$},\\
אזי \L{$\text{BFS}$} מגלה כל צומת \L{$v$} שהוא בר-השגה מ-\L{$s$}
ובסיום האלג' \L{$d(v)=\delta(s,v)$}.\\
בנוסף, לכל צומת \L{$v$} בר-השגה מ-\L{$s$} אחד המסלולים הקצרים ל-\L{$v$}
הוא מסלול קצר\\
ביותר מ-\L{$s$} ל-\L{$\pi(v)$}, שאליו נוספת הקשת \L{$(\pi(v),v)$}.\\


\subsubsection*{הוכחה:}

נניח בשלילה שקיים צומת \L{$v$} עבורו \L{$d(v)\ne\delta(s,v)$} מלמה
{\beginL 2\endL}, מפני ש-\L{$d(v)\ge\delta(s,v)$} אזי \\
נקבל \L{$d(v)>\delta(s,v)$}. נקח את הצומת \L{$v$} עם \L{$\delta(s,v)$}
מינימלי שעבורו מתקיים אי-השוויון החזק.\\
נסתכל על המסלול הקצר ביותר מ-\L{$s$} ל-\L{$v$}. יהי \L{$u$} הצומת
שמופיע מיד לפני \L{$v$} \\
במסלול זה. אזי, \L{$\delta(s,v)=\delta(s,u)+1$}.\\
מאופן הבחירה של \L{$v$} כצומת בעל \L{$\delta(s,v)$} המינימלי שמקיים
את אי-השוויון החזק,\\
נקבל כי \L{$d(v)=\delta(s,u)$}.\\
מכאן:\L{
\[
d(v)>\delta(s,v)=\delta(s,u)+1=d(u)+1\text{ (**)}
\]
}\\
נראה כי אי-השוויון ){*}{*}( לא יתכן. נסתכל על הצעד בו \L{$u$} יוצא
מהתור נבחין ב {\beginL 3\endL} מקרים:
\begin{enumerate}
\item \L{$v$} עוד לא \textquotedblright התגלה\textquotedblleft , לכן מהאלגוריתם
נקבל \L{$d(v)=d(u)+1$}\L{$\Leftarrow\text{\ensuremath{} }$} סתירה
ל-){*}{*}(.
\item \L{$v$} כבר לא היה בתור. לכן, \L{$v$} נכנס לתור לפני \L{$u$} )שכן
התור \L{$\text{FIFO}$}(\\
וממסקנה {\beginL 4\endL} \L{$d(v)\le d(u)$} \L{$\Leftarrow$} סתירה
ל-){*}{*}(.
\item הצומת \L{$v$} עדיין בתור. לכן, מיד לפני ש-\L{$v$} יצא מהתור, \L{$u$}
ראשון בתור\\
 ו-\L{$v$} \textquotedblright במקרה הגרוע\textquotedblleft{} אחרון
בתור. ולכן מלמה {\beginL 3\endL} \L{$d(v)\le d(u)+1$} \L{$\Leftarrow$}
סתירה ל-){*}{*}(.
\end{enumerate}
מכאן נקבל כי לכל צומת \L{$v$} שהוא בר הגעה מ-\L{$s$} מתקיים \L{$d(v)=\delta(s,v)$}.\\
לסיום, נזכיר כי אם \L{$\pi(v)=u$} אזי \L{$\delta(s,v)=\delta(s,u)+1$}
\L{$\Leftrightarrow$} \L{$d(v)=d(u)+1$}\\
לכן, ניתן לקבל מסלול קצר ביותר מ-\L{$s$} ל-\L{$v$} ע\textquotedblleft י
הוספת \L{$(\pi(v),v)$} למסלול הקצר ביותר מ-\L{$s$} ל-\L{$\pi(v)$}.
\end{document}
